:root {
    --primary: #ff4d6d;
    --secondary: #ff758f;
    --bg: #fff0f3;
    --dark: #590d22;
    --glass: rgba(255, 255, 255, 0.8);
}

body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    background: linear-gradient(135deg, #fff0f3 0%, #ffccd5 100%);
    font-family: 'Montserrat', sans-serif;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
}

/* --- 1. GAME VIEW --- */
#game-view { 
    position: relative; z-index: 10; text-align: center; width: 85%; max-width: 360px; 
    padding: 40px 25px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px);
    border-radius: 40px; border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 25px 50px rgba(255, 77, 109, 0.15);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

h2 { font-family: 'Playfair Display', serif; color: var(--dark); font-size: 2.2rem; margin: 0; }
.subtitle { font-size: 0.85rem; color: #a36f7a; margin-top: 8px; margin-bottom: 30px; }

.board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 35px; }
.cell { 
    aspect-ratio: 1/1; background: #ffffff; border-radius: 20px; display: flex;
    justify-content: center; align-items: center; font-size: 2.5rem; font-weight: 700;
    color: var(--primary); box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.05), -6px -6px 12px rgba(255, 255, 255, 0.8);
    cursor: pointer; transition: 0.2s;
}
.cell:active { transform: scale(0.92); box-shadow: inset 4px 4px 8px rgba(0,0,0,0.1); }

#status-box {
    display: inline-block; padding: 14px 28px; border-radius: 50px;
    background: var(--primary); color: white; font-size: 0.75rem;
    font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase;
    box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3);
}

/* --- 2. PRANK OVERLAY --- */
#prank-overlay {
    display: none; position: fixed; inset: 0; background: #000;
    color: #0f0; z-index: 9999; flex-direction: column;
    justify-content: center; align-items: center; text-align: center;
    font-family: 'Courier New', monospace; padding: 20px;
}
.spinner { width: 40px; height: 40px; border: 3px solid #333; border-top: 3px solid #0f0; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }

/* --- 3. SCRAPBOOK VIEW --- */
#scrapbook-view {
    display: none; width: 100%; height: 100%;
    justify-content: center; align-items: center;
    perspective: 2000px; opacity: 0; transition: opacity 1s;
}
.book { position: relative; width: 310px; height: 450px; transform-style: preserve-3d; }
.cover-wrapper { position: absolute; inset: 0; z-index: 10; transform-origin: left; transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; cursor: pointer; }
.front, .back, .inside-page { position: absolute; inset: 0; border-radius: 5px 15px 15px 5px; }
.front { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; border-left: 10px solid var(--dark); box-shadow: 10px 10px 30px rgba(0,0,0,0.2); }
.back { background: #fff9fb; transform: rotateY(180deg); backface-visibility: hidden; border-radius: 15px 5px 5px 15px; padding: 25px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: center; align-items: center; }
.inside-page { background: #fff; z-index: 1; padding: 25px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: inset 15px 0 30px rgba(0,0,0,0.1); }
.photo-frame { width: 100%; height: 210px; background: #fff; padding: 8px; box-shadow: 0 8px 15px rgba(0,0,0,0.1); transform: rotate(-2deg); margin-bottom: 20px; border: 1px solid #eee; box-sizing: border-box; }
.photo-frame img { width: 100%; height: 100%; object-fit: cover; }
iframe { width: 100%; height: 150px; border-radius: 12px; border: none; margin-top: 10px; }

/* Helpers */
.opened { transform: rotateY(-165deg); }
.hidden { display: none !important; opacity: 0; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
.thinking { animation: pulse 1s infinite; opacity: 0.8; }